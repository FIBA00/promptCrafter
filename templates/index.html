<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PromptCrafter</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
  <link rel="stylesheet" href="/static/css/main.css">
  <style>
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
    .glass {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 1rem;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-gray-900 to-gray-800 text-white min-h-screen flex flex-col">
  <header class="p-6 text-center">
    <h1 class="text-4xl font-extrabold tracking-wide">PromptCrafter</h1>
    <p class="text-gray-400">Generate effective AI prompts with context, clarity, and personality</p>
  </header>

  <div class="flex-1 flex justify-center items-start px-4">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 w-full max-w-6xl">

      <!-- Preset Prompts side -->
      <div class="hidden md:flex flex-col justify-center items-center">
        <h2 class="text-2xl font-bold mb-4 text-blue-400">Preset Prompts</h2>
        <div class="overflow-y-auto h-[500px] w-full glass p-4 space-y-3">
          <div class="preset-prompt cursor-pointer hover:bg-gray-700 rounded-lg p-3 transition-colors" data-preset="code-review">
            <h3 class="text-lg font-semibold text-blue-300">Code Review Expert</h3>
            <p class="text-sm text-gray-400">For getting detailed code analysis and improvement suggestions</p>
          </div>
          
          <div class="preset-prompt cursor-pointer hover:bg-gray-700 rounded-lg p-3 transition-colors" data-preset="system-design">
            <h3 class="text-lg font-semibold text-green-300">System Design Architect</h3>
            <p class="text-sm text-gray-400">For creating architecture designs for complex systems</p>
          </div>
          
          <div class="preset-prompt cursor-pointer hover:bg-gray-700 rounded-lg p-3 transition-colors" data-preset="data-analysis">
            <h3 class="text-lg font-semibold text-yellow-300">Data Analysis Expert</h3>
            <p class="text-sm text-gray-400">For analyzing datasets and extracting insights</p>
          </div>
          
          <div class="preset-prompt cursor-pointer hover:bg-gray-700 rounded-lg p-3 transition-colors" data-preset="debugging">
            <h3 class="text-lg font-semibold text-red-300">Debugging Helper</h3>
            <p class="text-sm text-gray-400">For troubleshooting and fixing bugs in your code</p>
          </div>
          
          <div class="preset-prompt cursor-pointer hover:bg-gray-700 rounded-lg p-3 transition-colors" data-preset="learning">
            <h3 class="text-lg font-semibold text-purple-300">Learning Assistant</h3>
            <p class="text-sm text-gray-400">For learning new technologies or concepts</p>
          </div>
          
          <div class="preset-prompt cursor-pointer hover:bg-gray-700 rounded-lg p-3 transition-colors" data-preset="product-manager">
            <h3 class="text-lg font-semibold text-indigo-300">Product Manager</h3>
            <p class="text-sm text-gray-400">For product planning, roadmaps, and feature prioritization</p>
          </div>
          
          <div class="preset-prompt cursor-pointer hover:bg-gray-700 rounded-lg p-3 transition-colors" data-preset="creative-writer">
            <h3 class="text-lg font-semibold text-pink-300">Creative Writer</h3>
            <p class="text-sm text-gray-400">For creative writing, storytelling, and content creation</p>
          </div>

          <div class="mt-6 text-center">
            <a href="{{ url_for('advanced_templates') }}" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded text-white text-sm font-medium">
              View Advanced Templates
            </a>
          </div>
        </div>
      </div>

      <!-- Form side -->
      <form action="/generate" method="post" class="space-y-6 bg-white/10 glass p-8 shadow-xl">
        {% if prefill %}
        <div class="mb-4 p-3 bg-blue-900/50 rounded-lg">
          <h3 class="text-lg font-semibold text-blue-300">{{ template_title }}</h3>
          <p class="text-sm text-gray-400">Customize this template for your specific needs</p>
        </div>
        {% endif %}
        
        <label class="block">
          <span class="text-lg font-semibold">1. Role or Context</span>
          <input name="role" required placeholder="e.g. AI architect for a prediction engine"
            class="mt-1 w-full rounded-md p-3 bg-gray-900 text-white border border-gray-700 focus:outline-none"
            value="{{ role if prefill else '' }}">
          <div class="mt-1 text-xs text-gray-400">Examples: Software Architect, Data Scientist, Personal Assistant, Career Coach</div>
        </label>

        <label class="block">
          <span class="text-lg font-semibold">2. Task or Objective</span>
          <textarea name="task" required placeholder="Describe what you want to accomplish..."
            class="mt-1 w-full h-20 rounded-md p-3 bg-gray-900 text-white border border-gray-700 focus:outline-none">{{ task if prefill else '' }}</textarea>
          <div class="mt-1 text-xs text-gray-400">Examples: Build a recommendation system, Create a data visualization dashboard, Help me organize my schedule, Suggest a career path</div>
        </label>

        <label class="block">
          <span class="text-lg font-semibold">3. Constraints or Tools</span>
          <textarea name="constraints" placeholder="e.g. Must support multithreading, avoid overloads..."
            class="mt-1 w-full h-24 rounded-md p-3 bg-gray-900 text-white border border-gray-700 focus:outline-none">{{ constraints if prefill else '' }}</textarea>
          <div class="mt-1 text-xs text-gray-400">Examples: Use Python and Pandas, Complete within 2 weeks, Consider user privacy, Limited to open-source tools</div>
        </label>

        <label class="block">
          <span class="text-lg font-semibold">4. Output Style</span>
          <select name="output" required
            class="mt-1 w-full rounded-md p-3 bg-gray-900 text-white border border-gray-700 focus:outline-none">
            <option value="step-by-step" {% if prefill and output == 'step-by-step' %}selected{% endif %}>Step-by-step</option>
            <option value="code first" {% if prefill and output == 'code first' %}selected{% endif %}>Code first</option>
            <option value="brainstorm first" {% if prefill and output == 'brainstorm first' %}selected{% endif %}>Brainstorm first</option>
            <option value="comparison format" {% if prefill and output == 'comparison format' %}selected{% endif %}>Comparison format</option>
            <option value="pseudo-algorithm + real code" {% if prefill and output == 'pseudo-algorithm + real code' %}selected{% endif %}>Pseudo-algorithm + real code</option>
            <option value="pros and cons" {% if prefill and output == 'pros and cons' %}selected{% endif %}>Pros and cons</option>
            <option value="best practices" {% if prefill and output == 'best practices' %}selected{% endif %}>Best practices guide</option>
            <option value="tutorial style" {% if prefill and output == 'tutorial style' %}selected{% endif %}>Tutorial style</option>
            <option value="question and answer" {% if prefill and output == 'question and answer' %}selected{% endif %}>Question and answer</option>
          </select>
          <div class="mt-1 text-xs text-gray-400">Select the format that best suits your needs</div>
        </label>

        <label class="block">
          <span class="text-lg font-semibold">5. Personality or Tone</span>
          <input name="personality" required placeholder="e.g. Nerdy but strategic, honest coder bestie"
            class="mt-1 w-full rounded-md p-3 bg-gray-900 text-white border border-gray-700 focus:outline-none"
            value="{{ personality if prefill else '' }}">
          <div class="mt-1 text-xs text-gray-400">Examples: Professional and concise, Friendly and encouraging, Technical with metaphors, Socratic questioning</div>
        </label>

        <div class="flex justify-between items-center pt-4">
          <button type="submit"
            class="bg-blue-600 hover:bg-blue-700 px-6 py-2 rounded-lg text-white font-bold shadow">Generate Prompt</button>

          <button type="reset"
            class="bg-gray-700 hover:bg-gray-800 px-4 py-2 rounded-lg text-white">Reset</button>
        </div>
      </form>

    </div>
  </div>

  <!-- Login/Register Options -->
  <div class="flex justify-center mt-8 mb-8">
    <div class="flex space-x-4">
      {% if current_user.is_authenticated %}
        <a href="{{ url_for('my_prompts') }}" class="bg-purple-600 hover:bg-purple-700 px-6 py-2 rounded-lg text-white font-semibold">
          My Prompts
        </a>
        <a href="{{ url_for('logout') }}" class="bg-gray-600 hover:bg-gray-700 px-6 py-2 rounded-lg text-white font-semibold">
          Logout
        </a>
      {% else %}
        <a href="{{ url_for('login') }}" class="bg-blue-600 hover:bg-blue-700 px-6 py-2 rounded-lg text-white font-semibold">
          Sign In
        </a>
        <a href="{{ url_for('register') }}" class="bg-purple-600 hover:bg-purple-700 px-6 py-2 rounded-lg text-white font-semibold">
          Create Account
        </a>
      {% endif %}
      <a href="{{ url_for('public_prompts') }}" class="bg-indigo-600 hover:bg-indigo-700 px-6 py-2 rounded-lg text-white font-semibold">
        Explore Public Prompts
      </a>
    </div>
  </div>

  <footer class="text-center py-6 text-sm text-gray-500">
    &copy; 2025 PromptCrafter. Flask powered. Built with ❤️ by Fraol.
  </footer>

  <script src="/static/js/main.js"></script>
  <script>
    // Preset prompt templates
    const presetPrompts = {
      'code-review': {
        role: 'Expert Software Engineer and Code Reviewer',
        task: 'Review my code for bugs, security issues, and performance optimizations while explaining the rationale behind each improvement suggestion.',
        constraints: 'Focus on readability, maintainability, and adherence to best practices. Suggest changes that are realistic to implement.',
        output: 'step-by-step',
        personality: 'Knowledgeable, constructive, and educational without being condescending'
      },
      'system-design': {
        role: 'Experienced System Design Architect',
        task: 'Design a scalable architecture for my application, addressing performance, reliability, and security concerns.',
        constraints: 'Must handle high traffic, consider cost efficiency, and use modern cloud-native approaches.',
        output: 'comparison format',
        personality: 'Thorough, systematic, and forward-thinking'
      },
      'data-analysis': {
        role: 'Data Scientist and Analytics Expert',
        task: 'Analyze my dataset to extract meaningful insights, identify patterns, and suggest actionable recommendations.',
        constraints: 'Consider statistical validity, avoid misleading correlations, and focus on business impact.',
        output: 'brainstorm first',
        personality: 'Analytical, detail-oriented, and business-focused'
      },
      'debugging': {
        role: 'Senior Software Engineer with debugging expertise',
        task: 'Help me troubleshoot and fix a bug in my code by identifying the root cause and suggesting solutions.',
        constraints: 'Work with the information provided, suggest debugging techniques, and explain your reasoning clearly.',
        output: 'step-by-step',
        personality: 'Patient, methodical, and focused on practical solutions'
      },
      'learning': {
        role: 'Expert Educator and Technical Mentor',
        task: 'Explain a complex technical concept or technology to me in a way that builds my understanding from fundamentals to advanced topics.',
        constraints: 'Use examples, analogies, and progressive complexity. Check understanding at key points.',
        output: 'tutorial style',
        personality: 'Patient, encouraging, and adapts to my level of understanding'
      },
      'product-manager': {
        role: 'Senior Product Manager with technical background',
        task: 'Help me develop a product strategy, define requirements, and create a roadmap for feature development.',
        constraints: 'Consider market needs, user feedback, technical feasibility, and business goals.',
        output: 'pros and cons',
        personality: 'Strategic, user-focused, and balances vision with practicality'
      },
      'creative-writer': {
        role: 'Creative Writer and Content Strategist',
        task: 'Generate engaging content for my audience that is both informative and captivating.',
        constraints: 'Match the brand voice, incorporate key messages, and optimize for the target platform.',
        output: 'brainstorm first',
        personality: 'Creative, adaptable, and audience-aware'
      }
    };

    // Add click event handlers to preset prompts
    document.querySelectorAll('.preset-prompt').forEach(preset => {
      preset.addEventListener('click', function() {
        const presetType = this.getAttribute('data-preset');
        const promptData = presetPrompts[presetType];
        
        if (promptData) {
          // Fill in the form with preset data
          document.querySelector('input[name="role"]').value = promptData.role;
          document.querySelector('textarea[name="task"]').value = promptData.task;
          document.querySelector('textarea[name="constraints"]').value = promptData.constraints;
          
          // Set the select dropdown
          const selectElement = document.querySelector('select[name="output"]');
          for (let i = 0; i < selectElement.options.length; i++) {
            if (selectElement.options[i].value === promptData.output) {
              selectElement.selectedIndex = i;
              break;
            }
          }
          
          document.querySelector('input[name="personality"]').value = promptData.personality;
          
          // Highlight the selected preset
          document.querySelectorAll('.preset-prompt').forEach(p => {
            p.classList.remove('bg-gray-700');
          });
          this.classList.add('bg-gray-700');
        }
      });
    });
  </script>
</body>
</html>
